
if [info exists env(SPINAL_SIM)] {
    set SPINAL_SIM $::env(SPINAL_SIM)
} else {
    set SPINAL_SIM no
}



if {$SPINAL_SIM == "yes"} {
    interface jtag_tcp

} else {
    interface ftdi
    ftdi_device_desc "Digilent USB Device"
    ftdi_vid_pid 0x0403 0x6014

    ftdi_channel 0
    ftdi_layout_init 0x00e8 0x60eb

    reset_config none
    adapter_khz 50000

   # source [find cpld/xilinx-xc7.cfg]
    #source [find cpld/jtagspi.cfg]

    # set TAP_NAME xc7.tap
        #set expected-id 0x10001FFF

}

    set _CHIPNAME fpga_spinal
    set TAP_NAME $_CHIPNAME.bridge
    set _CPUTAPID 0x10001fff
    jtag newtap $_CHIPNAME bridge -expected-id $_CPUTAPID -irlen 4 -ircapture 0x1 -irmask 0xF
    reset_config none
    adapter_khz 400